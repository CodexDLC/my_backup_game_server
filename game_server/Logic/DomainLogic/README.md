# game_server/Logic/DomainLogic

Эта папка содержит слой, отвечающий за реализацию комплексных, длительных и асинхронных бизнес-процессов. Логика в этом слое предназначена исключительно для выполнения в фоновом режиме специализированными обработчиками (воркерами).

Архитектура и Принципы
Асинхронное Выполнение: Вся логика в DomainLogic спроектирована для асинхронного выполнения. Она не должна вызываться напрямую из синхронного кода (например, API-роутов).

Оркестрация Процессов: Сервисы в этом слое не просто выполняют одну операцию, а оркестрируют (управляют) последовательностью шагов для выполнения сложной бизнес-задачи. Например, процесс создания персонажа может включать шаги валидации, генерации атрибутов, сохранения в нескольких таблицах БД и обновления кэша.

Событийно-ориентированный Подход (Event-Driven): DomainLogic работает по событийно-ориентированной модели. Он не инициирует процессы сам, а реагирует на команды (сообщения), поступающие из шины сообщений.

Схема Взаимодействия
Типичный жизненный цикл задачи выглядит следующим образом:

Инициация (ApplicationLogic): Сервис из ApplicationLogic решает, что задача слишком долгая для синхронной обработки.

Делегирование (InfrastructureLogic): ApplicationLogic публикует сообщение (команду) в шину сообщений.

Исполнение (Воркер): Фоновый воркер (arq_worker из InfrastructureLogic) получает это сообщение.

Обработка (DomainLogic): Воркер вызывает соответствующий класс или функцию из DomainLogic, передавая ей данные из сообщения, для выполнения реальной работы.

DomainLogic активно использует сервисы из CoreServices (для инструментов) и репозитории из InfrastructureLogic (для доступа к данным).
